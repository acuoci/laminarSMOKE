

# Installation instructions for LaminarSmoke from scratch

module --force purge
# module load StdEnv 
# module load gcc/7.3.0

module load intel/19.0.4
module load mkl/2020.0 openmpi/4.1.0

# 1/ Install openfoam: https://openfoam.org/download/source/software-for-compilation/
source $HOME/soot/local/openFOAM_v6/OpenFOAM-6/etc/bashrc

# 2/ Before compiling openFOAM, need to create folders:
# mkdir -p $HOME/soot/local/openFOAM_v6/OpenFOAM-6/platforms/linux64GccDPInt32OptSYSTEMOPENMPI/src/Pstream/mpi
# mkdir -p $HOME/soot/local/openFOAM_v6/OpenFOAM-6/platforms/linux64GccDPInt32OptSYSTEMOPENMPI/src/parallel/decompose/ptscotchDecomp/

# 3/ When building steady laminarSmoke solver: 
# missing libgfortran. Fixed by: ln -s /usr/lib64/libgfortran.so.4 ~/local/openFOAM_v6/OpenFOAM-6/platforms/linux64GccDPInt32Opt/lib/libgfortran.so
# missing libiomp5. Fixed by: ln -s /opt/intel/18.0/compiler/lib/intel64_lin/libiomp5.so ~/soot/local/openFOAM_v6/OpenFOAM-6/platforms/linux64GccDPInt32Opt/lib/libiomp5.so 
# or ln -s /usr/tce/packages/mkl/mkl-2020.0/compilers_and_libraries/linux/lib/intel64/libiomp5.so ~/soot/local/openFOAM_v6/OpenFOAM-6/platforms/linux64GccDPInt32Opt/lib/libiomp5.so

export EIGEN3_ROOT=$HOME/soot/local/eigen/eigen-3.3.8

export PATH=/usr/tce/packages/gcc/gcc-4.9.3/bin:$PATH

export BOOST_LIBRARY_PATH=/usr/tce/packages/boost/boost-1.72.0-mvapich2-2.3-gcc-4.9.3/
export BOOST_ROOT=$BOOST_LIBRARY_PATH
export LD_LIBRARY_PATH=$BOOST_LIBRARY_PATH/lib:$LD_LIBRARY_PATH
